#  Linux read log Analysis

Полезные команды для вычитки, поиска и анализа логов в Linux.  
Используются утилиты `grep`, `less`, `vim`, `tail`, `awk`, `sed`

## grep — поиск по тексту
| Ключ      | Назначение                                     | Пример                       |                 |
| --------- | ---------------------------------------------- | ---------------------------- | --------------- |
| `-i`      | Игнорировать регистр                           | `grep -i error app.log`      |                 |
| `-r`      | Рекурсивный поиск по каталогу                  | `grep -r "Timeout" /var/log` |                 |
| `-n`      | Показать номер строки                          | `grep -n Exception app.log`  |                 |
| `-A N`    | Показать N строк **после** совпадения          | `grep -A 3 ERROR app.log`    |                 |
| `-B N`    | Показать N строк **до** совпадения             | `grep -B 2 ERROR app.log`    |                 |
| `-C N`    | Показать N строк **до и после**                | `grep -C 2 ERROR app.log`    |                 |
| `-v`      | Исключить совпадения (инвертировать поиск)     | `grep -v "DEBUG" app.log`    |                 |
| `-E`      | Использовать расширенные регулярки (как egrep) | `grep -E "ERROR              | FATAL" app.log` |
| `--color` | Подсветка найденных совпадений                 | `grep --color ERROR app.log` |                 |

### Примеры
```
grep -i "error" /var/log/syslog               # Поиск ошибок без учёта регистра
grep -r "NullPointer" /opt/app/logs           # Рекурсивный поиск по папке
grep -A 5 "Exception" app.log                 # Вывести строку и 5 строк после
grep -v "DEBUG" app.log                       # Исключить отладочные записи
grep -E "ERROR|FATAL|CRITICAL" /var/log/app.log  # Несколько шаблонов
```


## Less — удобный просмотр логов
| Ключ      | Назначение                                               | Пример            |
| --------- | -------------------------------------------------------- | ----------------- |
| `-N`      | Показать номера строк                                    | `less -N app.log` |
| `+F`      | "Follow" — смотреть лог в реальном времени (как tail -f) | `less +F app.log` |
| `/текст`  | Поиск вперёд по шаблону                                  | `/ERROR`          |
| `?текст`  | Поиск назад по шаблону                                   | `?Timeout`        |
| `n` / `N` | Повторить поиск вперёд / назад                           | `n`, `N`          |
| `g` / `G` | Перейти в начало / конец файла                           | `g`, `G`          |
| `q`       | Выйти из просмотра                                       | `q`               |

### Пример
```
less -N /var/log/syslog           # Просмотр с номерами строк
less +F /var/log/nginx/access.log # Следить за логом в реальном времени
```

## vim — продвинутый просмотр и редактирование логов
| Команда         | Назначение                        | Пример             |
| --------------- | --------------------------------- | ------------------ |
| `/текст`        | Поиск вперёд                      | `/ERROR`           |
| `?текст`        | Поиск назад                       | `?Exception`       |
| `n` / `N`       | Следующее / предыдущее совпадение | `n`, `N`           |
| `:%s/old/new/g` | Замена текста по всему файлу      | `:%s/INFO/DEBUG/g` |
| `:set number`   | Показать номера строк             |                    |
| `:set hlsearch` | Подсветить найденное              |                    |

```
vim /var/log/app.log
# Нажми /ERROR и Enter, чтобы найти ошибки
# Используй :set number для отображения номеров строк
```

## tail — просмотр последних строк
| Ключ   | Назначение                             | Пример                              |
| ------ | -------------------------------------- | ----------------------------------- |
| `-n N` | Показать последние N строк             | `tail -n 100 app.log`               |
| `-f`   | Следить за логом в реальном времени    | `tail -f app.log`                   |
| `-F`   | Следить даже если файл был перезаписан | `tail -F /var/log/nginx/access.log` |

```
tail -n 50 /var/log/syslog        # Последние 50 строк
tail -f /var/log/app.log          # Следить за обновлениями в реальном времени
tail -f /var/log/app.log | grep ERROR  # Реальный поиск ошибок на лету
```

## awk и sed — быстрый разбор логов
```
awk '/ERROR/ {print $0}' app.log             # Вывести строки с ERROR
awk '{print $1, $2, $5}' app.log             # Вывести выбранные колонки
sed -n '/ERROR/p' app.log                    # Альтернатива grep
```

