# üê≥ Docker –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|------|-----------|-------------------|
| `docker build .` | –°–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑ –∏–∑ Dockerfile | –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ |
| `docker run IMAGE` | –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ –æ–±—Ä–∞–∑–∞ | –ü—Ä–æ–≤–µ—Ä–∫–∞ / –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `docker ps` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã | –û—Ç–ª–∞–¥–∫–∞ |
| `docker ps -a` | –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–≤–∫–ª—é—á–∞—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ) | –û—á–∏—Å—Ç–∫–∞ |
| `docker images` | –°–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ | –ö–æ–Ω—Ç—Ä–æ–ª—å –æ–±—Ä–∞–∑–æ–≤ |
| `docker stop ID` | –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ |
| `docker rm ID` | –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | –û—á–∏—Å—Ç–∫–∞ |
| `docker rmi IMAGE` | –£–¥–∞–ª—è–µ—Ç –æ–±—Ä–∞–∑ | –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç–∞ |
| `docker logs ID` | –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | –û—Ç–ª–∞–¥–∫–∞ |
| `docker exec -it ID bash` | –í–æ–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | Debug |

---

## üßπ –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ 

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç | –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å |
|------|-----------|----------------|
| `docker container prune` | –í—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã | –†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ |
| `docker image prune` | –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã | –ö–æ–≥–¥–∞ –∫–æ–Ω—á–∞–µ—Ç—Å—è –º–µ—Å—Ç–æ |
| `docker system prune` | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã, —Å–µ—Ç–∏, –∫–µ—à | –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ) |

---

## üì• –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–µ—Ä–µ–Ω–æ—Å –æ–±—Ä–∞–∑–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ |
|------|-----------|------------|
| `docker save IMAGE > image.tar` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞–∑ –≤ —Ñ–∞–π–ª | –ü–µ—Ä–µ–¥–∞—á–∞ –æ–±—Ä–∞–∑–∞ |
| `docker load -i image.tar` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ —Ñ–∞–π–ª–∞ | –ë–µ–∑ Docker Hub |
| `docker pull IMAGE` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ registry | –û–±—ã—á–Ω—ã–π workflow |
| `docker push IMAGE` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑ –≤ registry | CI/CD |

---

## üèóÔ∏è –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ (docker build)

| –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `docker build -t app:0.1 .` | –°–±–æ—Ä–∫–∞ —Å –∏–º–µ–Ω–µ–º –∏ —Ç–µ–≥–æ–º |
| `docker build -f path/Dockerfile .` | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Dockerfile |
| `docker build --no-cache .` | –ë–µ–∑ –∫–µ—à–∞ |
| `docker build --build-arg KEY=value .` | –ü–µ—Ä–µ–¥–∞—á–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ |
| `docker build --platform linux/amd64 .` | –°–±–æ—Ä–∫–∞ –ø–æ–¥ –¥—Ä—É–≥—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É |

---

## üîß –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –æ–ø—Ü–∏–∏ —Å–±–æ—Ä–∫–∏

| –§–ª–∞–≥ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω |
|----|-----------|------------|
| `-t name:tag` | –£–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º—è –∏ —Ç–µ–≥ –æ–±—Ä–∞–∑–∞ | –í—Å–µ–≥–¥–∞ |
| `-f path/to/Dockerfile` | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Dockerfile | –ù–µ –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ |
| `--platform linux/amd64` | –°–±–æ—Ä–∫–∞ –ø–æ–¥ x86 | Mac M1 ‚Üí Linux |
| `--no-cache` | –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∫–µ—à | –ß–∏—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ |
| `--build-arg KEY=value` | –ü–µ—Ä–µ–¥–∞—ë—Ç ARG | ENV, —Ç–æ–∫–µ–Ω—ã, –≤–µ—Ä—Å–∏–∏ |

---

## ‚ñ∂Ô∏è ENTRYPOINT –∏ CMD 

### –ë–∞–∑–æ–≤–∞—è –∏–¥–µ—è
- **ENTRYPOINT** ‚Äî *—á—Ç–æ* –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- **CMD** ‚Äî *—Å –∫–∞–∫–∏–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é*

---

### –ü—Ä–∏–º–µ—Ä Dockerfile

```Dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY app.py .

ENTRYPOINT ["python", "app.py"]
CMD ["--mode", "prod"]
```

| –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞                      | –ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è            | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ                                 |
| ------------------------------------ | --------------------------------- | ------------------------------------------ |
| `docker run myapp`                   | `python app.py --mode prod`       | –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è CMD –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é              |
| `docker run myapp --mode dev`        | `python app.py --mode dev`        | **CMD –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω**, ENTRYPOINT —Å–æ—Ö—Ä–∞–Ω—ë–Ω |
| `docker run myapp --help`            | `python app.py --help`            | –ß–∞—Å—Ç—ã–π CLI-–∫–µ–π—Å                            |
| `docker run myapp --config cfg.yaml` | `python app.py --config cfg.yaml` | –ü–µ—Ä–µ–¥–∞—á–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é             |

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ENTRYPOINT
| –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞                                      | –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è         | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ        |
| ---------------------------------------------------- | ---------------------- | ------------------ |
| `docker run --entrypoint bash myapp`                 | `bash`                 | Debug / –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ |
| `docker run --entrypoint python myapp app.py --test` | `python app.py --test` | –í—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫   |



### Multistage
```
FROM python:3.11 AS builder
WORKDIR /app
COPY . .
RUN pip install --user -r requirements.txt

FROM python:3.11-slim
COPY --from=builder /root/.local /root/.local
ENV PATH=/root/.local/bin:$PATH
CMD ["python", "main.py"]

```
